CREATE TABLE IF NOT EXISTS users
(
	username VARCHAR(30) PRIMARY KEY,
    password VARCHAR(32) NOT NULL,
    id INT UNIQUE NOT NULL AUTO_INCREMENT
);

CREATE TABLE IF NOT EXISTS groups
(
	id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS services
(
	script VARCHAR(255) PRIMARY KEY,
    description TEXT DEFAULT NULL
);

CREATE TABLE IF NOT EXISTS usergroups
(
	username VARCHAR(30),
    id_group INT,
    PRIMARY KEY(username,id_group),
    FOREIGN KEY(username)
		REFERENCES users(username),
	FOREIGN KEY(id_group)
		REFERENCES groups(id)
);

CREATE TABLE IF NOT EXISTS groupservices
(
	script VARCHAR(255),
    id INT,
    PRIMARY KEY(script,id),
    FOREIGN KEY(script)
		REFERENCES services(script),
	FOREIGN KEY(id)
		REFERENCES groups(id)
);

CREATE TABLE IF NOT EXISTS Immagine
(
	Link VARCHAR(100) PRIMARY KEY,
    Attivo tinyint DEFAULT 0
);

CREATE TABLE IF NOT EXISTS Caffetteria
(
	ID_Caffetteria INT PRIMARY KEY,
    Titolo VARCHAR(50) DEFAULT NULL,
    Descrizione TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link)
);

CREATE TABLE IF NOT EXISTS Contatti
(
	ID_Contatti INT PRIMARY KEY,
    Titolo VARCHAR(50) NOT NULL,
    Indirizzo VARCHAR(100) NOT NULL,
    Tel VARCHAR(20) NOT NULL,
    Fax VARCHAR(20) DEFAULT NULL,
    Email VARCHAR(100) NOT NULL,
    Descrizione TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link)
);

CREATE TABLE IF NOT EXISTS Evento
(
	ID_Evento INT AUTO_INCREMENT PRIMARY KEY,
    Data Date DEFAULT NULL,
    Nome VARCHAR(50) DEFAULT NULL,
    Descrizione TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link)
);

CREATE TABLE IF NOT EXISTS Faq
(
	ID_FAQ INT AUTO_INCREMENT PRIMARY KEY,
    Domanda TEXT DEFAULT NULL,
    Risposta TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link)
);

CREATE TABLE IF NOT EXISTS Footer
(
	ID_Foot INT PRIMARY KEY,
    Titoletto VARCHAR(50) DEFAULT NULL,
    Indirizzo VARCHAR(100) DEFAULT NULL,
    Tel VARCHAR(20) DEFAULT NULL
);

CREATE TABLE IF NOT EXISTS Gallery
(
	ID_Gallery INT PRIMARY KEY,
    Img VARCHAR(100) NOT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link)
);

CREATE TABLE IF NOT EXISTS Header
(
	ID_Header INT PRIMARY KEY,
    Nome VARCHAR(20) NOT NULL,
    Link VARCHAR(100) NOT NULL,
    Posizione VARCHAR(2) NOT NULL
);

CREATE TABLE IF NOT EXISTS Home
(
	ID_Home INT PRIMARY KEY,
    Titolo VARCHAR(50) DEFAULT NULL,
    Descrizione TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link),
	Icona VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Icona)
		REFERENCES Immagine(Link)
);

CREATE TABLE IF NOT EXISTS Logo
(
	Logo VARCHAR(100) PRIMARY KEY,
    FOREIGN KEY (Logo) 
		REFERENCES Immagine(Link),
    Path VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS Messaggi
(
	ID_Messaggio INT PRIMARY KEY AUTO_INCREMENT,
    Nome TEXT NOT NULL,
    Cognome TEXT NOT NULL,
    Phone VARCHAR(20),
    Email VARCHAR(100) NOT NULL,
    Message TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS Newsletter
(
	ID_Mail INT PRIMARY KEY AUTO_INCREMENT,
    Email VARCHAR(100) NOT NULL,
	Data DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS Orario
(
	ID_Giorno INT PRIMARY KEY,
    Giorno VARCHAR(10) NOT NULL,
    Orario TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS Piatto
(
	Nome_Piatto VARCHAR(30) PRIMARY KEY,
    Descrizione TEXT NOT NULL,
    Ingredienti TEXT NOT NULL,
    Prezzo DECIMAL(8,2) NOT NULL,
    Img VARCHAR(100) NOT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link),
	tipo_piatto VARCHAR(20) NOT NULL,
    id INT UNIQUE
);

CREATE TABLE IF NOT EXISTS Prenotazione
(
	ID_Prenotazione INT PRIMARY KEY AUTO_INCREMENT,
    Data DATE NOT NULL,
    Persone INT NOT NULL,
    Time TIME NOT NULL,
    Nome_Cl VARCHAR(50) NOT NULL,
    Tel VARCHAR(20) NOT NULL,
    Email VARCHAR(100) DEFAULT NULL,
	Notice TEXT DEFAULT NULL
);

CREATE TABLE IF NOT EXISTS Presentazione_Reservation
(
	Titolo VARCHAR(50) PRIMARY KEY,
    Descrizione TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link)
);

CREATE TABLE IF NOT EXISTS Recensione
(
	ID_Recensione INT PRIMARY KEY,
    Nome VARCHAR(50) NOT NULL,
    Avatar VARCHAR(100) NOT NULL,
    FOREIGN KEY(Avatar) 
		REFERENCES Immagine(Link),
	Testo TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS Rist_Pizz
(
	ID_Rist_Pizz INT PRIMARY KEY,
    Titolo TEXT DEFAULT NULL,
    Descrizione TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link),
	Categoria VARCHAR(20) DEFAULT NULL
);

CREATE TABLE IF NOT EXISTS Slider
(
	ID_Slider INT PRIMARY KEY,
    Img VARCHAR(100) NOT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link),
	SliderTitle VARCHAR(50) NOT NULL,
	SliderText TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS Storia
(
	ID_Storia INT PRIMARY KEY,
    Titolo VARCHAR(50) DEFAULT NULL,
    Descrizione TEXT DEFAULT NULL,
    Img VARCHAR(100) DEFAULT NULL,
    FOREIGN KEY(Img)
		REFERENCES Immagine(Link)
);

